<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>SinFiltro ‚Äî Mobile Demo</title>
<meta name="description" content="SinFiltro ‚Äî interfaz m√≥vil demo. Feed, explorar, perfil, modo oscuro/claro y navegaci√≥n.">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg-1: #04040a;
    --bg-2: #071222;
    --neon-cyan: #00e1ff;
    --neon-blue: #00a7ff;
    --neon-violet: #8a6eff;
    --muted: #9fb0bf;
    --card: rgba(255,255,255,0.03);
    --glass: rgba(255,255,255,0.04);
    --radius:14px;
    --nav-h:78px;
  }

  /* Theme control (dark default) */
  html,body{height:100%;margin:0;font-family:'Inter',system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;color:#eaf7ff;background:linear-gradient(180deg,var(--bg-1),var(--bg-2));-webkit-font-smoothing:antialiased}
  body.theme-light{
    --bg-1:#f6f9ff; --bg-2:#eef4ff; --neon-cyan:#008fb3; --neon-blue:#0066aa; --neon-violet:#6b4ed6; --muted:#617183; color:#071226;
    background:linear-gradient(180deg,var(--bg-1),var(--bg-2));
  }

  /* animated subtle background */
  .bg-anim{
    position:fixed;inset:0;z-index:-3;background:
      radial-gradient(600px 240px at 10% 10%, rgba(138,110,255,0.05), transparent 8%),
      radial-gradient(800px 320px at 90% 80%, rgba(0,225,255,0.04), transparent 8%);
    animation: drift 20s linear infinite;
    pointer-events:none;
  }
  @keyframes drift{0%{transform:translate3d(0,0,0)}50%{transform:translate3d(6%,-4%,0)}100%{transform:translate3d(0,0,0)}}

  /* layout */
  .app{min-height:100vh;display:flex;flex-direction:column}
  header{position:sticky;top:0;z-index:40;padding:12px 14px;display:flex;align-items:center;justify-content:space-between;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));backdrop-filter:blur(8px);border-bottom:1px solid rgba(255,255,255,0.03)}
  .hdr-left,.hdr-center,.hdr-right{display:flex;align-items:center;gap:10px}
  .icon-btn{width:44px;height:44px;border-radius:12px;background:var(--card);display:flex;align-items:center;justify-content:center;color:var(--muted);border:1px solid rgba(255,255,255,0.02);cursor:pointer}
  .logo-wrap{display:flex;flex-direction:column;align-items:center}
  .brand-text{font-weight:700;color:var(--neon-cyan);letter-spacing:0.6px}
  .brand-sub{font-size:11px;color:var(--muted);margin-top:2px}

  .search-input{padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);background:transparent;color:inherit;min-width:120px}

  main{flex:1;overflow:auto;padding:14px;padding-bottom:120px;-webkit-overflow-scrolling:touch}

  .hero{padding:14px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.003));border:1px solid rgba(255,255,255,0.02);margin-bottom:14px}
  .hero h1{margin:0;color:var(--neon-violet);font-size:18px}
  .hero p{margin:8px 0 0;color:var(--muted);font-size:13px}

  .section{margin-top:8px}
  .section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
  .section-title{font-weight:700;color:var(--neon-cyan);display:flex;align-items:center;gap:8px}
  .see-all{font-size:13px;color:var(--muted);cursor:pointer}

  .h-row{display:flex;gap:12px;overflow:auto;padding-bottom:6px}
  .h-row::-webkit-scrollbar{display:none}
  .thumb{flex:0 0 170px;border-radius:12px;overflow:hidden;background:var(--card);border:1px solid rgba(255,255,255,0.02);box-shadow:0 6px 24px rgba(0,0,0,0.45);transition:transform .22s}
  .thumb img{width:170px;height:100px;object-fit:cover;display:block}
  .thumb .t-info{padding:8px;color:inherit;font-weight:700;background:linear-gradient(180deg,rgba(0,0,0,0.02),transparent)}

  .row-title{font-size:13px;color:var(--muted);margin-top:6px}

  .feed{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  .card{border-radius:12px;overflow:hidden;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid rgba(255,255,255,0.02);box-shadow:0 8px 30px rgba(0,0,0,0.45);transition:transform .18s}
  .card img{width:100%;height:160px;object-fit:cover;display:block}
  .card .meta{padding:10px;display:flex;justify-content:space-between;align-items:center}
  .title{font-weight:700;font-size:14px}
  .small{color:var(--muted);font-size:12px}

  /* floating center FAB */
  .fab-wrap{position:fixed;left:50%;transform:translateX(-50%);bottom:60px;z-index:90;display:flex;flex-direction:column;align-items:center;gap:10px;pointer-events:none}
  .fab{pointer-events:auto;width:72px;height:72px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--neon-cyan),var(--neon-blue));color:#001;border:none;box-shadow:0 30px 80px rgba(0,200,255,0.12);font-size:34px;cursor:pointer}
  .fab-sub{pointer-events:auto;width:56px;height:44px;border-radius:12px;background:linear-gradient(90deg,var(--neon-violet),var(--neon-blue));display:flex;align-items:center;justify-content:center;color:#001;border:none;box-shadow:0 10px 30px rgba(0,0,0,0.35);font-weight:700;opacity:0;transform:translateY(0);transition:all .25s}

  .fab-open .fab-sub{opacity:1;transform:translateY(-10px)}
  .fab-open .fab{transform:scale(1.02)}

  /* bottom nav */
  .bottom-nav{position:fixed;left:8px;right:8px;bottom:8px;height:78px;border-radius:16px;background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.45));display:flex;align-items:center;justify-content:space-around;padding:0 8px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 20px 60px rgba(0,0,0,0.6);z-index:80}
  .nav-item{display:flex;flex-direction:column;align-items:center;gap:6px;color:var(--muted);font-size:12px;cursor:pointer;user-select:none}
  .nav-item.active{color:var(--neon-cyan);transform:translateY(-3px)}

  /* small screens adjustments */
  @media (max-width:420px){
    .thumb{flex:0 0 150px}
    .card img{height:140px}
    .fab{width:64px;height:64px;font-size:30px}
  }

  /* micro-interactions */
  .clickable{cursor:pointer}
  .glow{box-shadow:0 6px 30px rgba(0,225,255,0.08)}
</style>
</head>
<body>
<div class="bg-anim" aria-hidden="true"></div>

<div id="app" class="app">
  <!-- header -->
  <header>
    <div class="hdr-left">
      <button id="menuBtn" class="icon-btn clickable" aria-label="Abrir men√∫">‚ò∞</button>
    </div>

    <div class="hdr-center logo-wrap" role="banner">
      <!-- placeholder image for IA logo (replace src with your IA 3D logo file) -->
      <div style="display:flex;align-items:center;gap:10px">
        <img id="logoImg" src="https://placehold.co/140x44/0b1220/00e1ff?text=SinFiltro" alt="SinFiltro logo" style="height:44px;border-radius:8px;box-shadow:0 8px 30px rgba(0,0,0,0.6)">
        <div style="display:flex;flex-direction:column">
          <div class="brand-text">SinFiltro</div>
          <div class="brand-sub">Tu espacio sin l√≠mites</div>
        </div>
      </div>
    </div>

    <div class="hdr-right" style="gap:8px">
      <div class="search-wrap" style="display:flex;align-items:center;gap:8px;padding:6px 8px;border-radius:12px;background:var(--card);border:1px solid rgba(255,255,255,0.02)">
        <input id="searchInput" class="search-input" placeholder="Buscar..." aria-label="Buscar">
      </div>
      <button id="themeToggle" class="icon-btn clickable" aria-label="Cambiar modo">üåô</button>
    </div>
  </header>

  <!-- main content -->
  <main id="main" class="main" role="main">
    <section class="hero">
      <h1>Descubre lo aut√©ntico</h1>
      <p>Fotos y videos creados por la comunidad. Da like, comenta y comparte.</p>
    </section>

    <section class="section" aria-labelledby="trendingTitle">
      <div class="section-header">
        <div class="section-title">üî• En Tendencia</div>
        <div class="see-all clickable" id="seeTrending">Ver todo</div>
      </div>
      <div class="h-row" id="trendingRow" aria-live="polite"></div>
    </section>

    <section class="section">
      <div class="section-header">
        <div class="section-title">‚è±Ô∏è Vistos recientemente</div>
        <div class="see-all clickable" id="seeRecent">Ver todo</div>
      </div>
      <div class="h-row" id="recentRow"></div>
    </section>

    <section class="section">
      <div class="section-header">
        <div class="section-title">üéØ Recomendados</div>
        <div class="see-all clickable" id="seeReco">Ver todo</div>
      </div>
      <div class="feed" id="feedGrid"></div>
    </section>
  </main>

  <!-- FAB -->
  <div class="fab-wrap" id="fabWrap">
    <div id="fabRow" style="display:flex;flex-direction:column;align-items:center;gap:10px">
      <button id="fabImg" class="fab-sub clickable" title="Imagen">üñºÔ∏è</button>
      <button id="fabShort" class="fab-sub clickable" title="Short">üé¨</button>
      <button id="fabUpload" class="fab-sub clickable" title="Subir">üì§</button>
    </div>
    <button id="fabMain" class="fab clickable" aria-label="Crear">Ôºã</button>
  </div>

  <!-- upload modal (demo) -->
  <div id="uploadModal" style="position:fixed;left:12px;right:12px;bottom:110px;background:linear-gradient(180deg,rgba(0,0,0,0.6),rgba(0,0,0,0.4));border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 30px 80px rgba(0,0,0,0.6);z-index:95;display:none">
    <strong style="color:var(--neon-cyan)">Subir contenido (demo)</strong>
    <p style="color:var(--muted);font-size:13px">Selecciona un archivo para agregarlo al feed localmente (demo).</p>
    <div style="display:flex;gap:8px;align-items:center;margin-top:8px">
      <input type="file" id="fileInput" accept="image/*,video/*">
      <button id="doUpload" style="padding:8px 12px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--neon-cyan),var(--neon-blue));color:#001;font-weight:700">Subir</button>
      <button id="closeUpload" style="padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted)">Cerrar</button>
    </div>
  </div>

  <!-- viewer -->
  <div id="viewer" style="position:fixed;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0.96),rgba(0,0,0,0.92));display:none;align-items:center;justify-content:center;z-index:120;padding:18px">
    <div style="width:100%;max-width:980px;border-radius:12px;overflow:hidden;background:#000" id="viewerContent"></div>
    <div style="display:flex;gap:8px;margin-top:12px">
      <button id="closeViewer" style="padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted)">Cerrar</button>
    </div>
  </div>

  <!-- drawer (profile / settings) -->
  <div id="drawer" style="position:fixed;left:0;right:0;bottom:0;height:56%;background:linear-gradient(180deg,#071226,#041224);border-top-left-radius:18px;border-top-right-radius:18px;padding:12px;z-index:130;display:none">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <strong style="color:var(--neon-cyan)">Perfil & Ajustes</strong>
      <button id="closeDrawer" class="icon-btn clickable">‚úï</button>
    </div>
    <div style="margin-top:10px;color:var(--muted);font-size:13px">
      <p><strong>Usuario demo</strong></p>
      <p>Panel de opciones y previsualizaci√≥n (demo).</p>
    </div>
  </div>

  <!-- bottom nav -->
  <nav class="bottom-nav" role="navigation" aria-label="Navegaci√≥n principal">
    <div class="nav-item active" data-tab="home" id="navHome">üè†<div style="font-size:11px">Inicio</div></div>
    <div class="nav-item" data-tab="videos" id="navVideos">üé¨<div style="font-size:11px">Videos</div></div>
    <div style="width:88px"></div>
    <div class="nav-item" data-tab="likes" id="navLikes">‚ù§Ô∏è<div style="font-size:11px">Me gusta</div></div>
    <div class="nav-item" data-tab="profile" id="navProfile">üë§<div style="font-size:11px">Perfil</div></div>
  </nav>
</div>

<script>
/* --- Helpers & storage keys --- */
const STORAGE_THEME = 'sinfiltro.theme.v1';
const STORAGE_FEED = 'sinfiltro.feed.v1';
const body = document.body;
const qs = s => document.querySelector(s);
const qsa = s => Array.from(document.querySelectorAll(s));
const randInt = n => Math.floor(Math.random()*n);

/* Theme init */
let theme = localStorage.getItem(STORAGE_THEME) || 'dark';
applyTheme(theme);

/* Demo feed: generate or restore */
let feed = JSON.parse(localStorage.getItem(STORAGE_FEED) || 'null');
if(!feed){
  feed = Array.from({length:8}).map((_,i)=>({
    id: 'd'+i,
    type: 'image',
    src: `https://source.unsplash.com/640x420/?neon,city,cyberpunk&sig=${Date.now()%1000 + i}`,
    title: ['Callej√≥n neon','Nocturna','Short creativo','Luces urbanas','Arte digital','Pixel night','Modo gamer','Retrato neon'][i%8],
    meta: `${(randInt(500)+1)}K ‚Ä¢ ${[1,2,3,4,6,8][i%6]}d`,
    likes: randInt(9000)
  }));
  localStorage.setItem(STORAGE_FEED, JSON.stringify(feed));
}

/* DOM refs */
const trendingRow = qs('#trendingRow');
const recentRow = qs('#recentRow');
const feedGrid = qs('#feedGrid');
const viewer = qs('#viewer');
const viewerContent = qs('#viewerContent');
const main = qs('#main');
const fabMain = qs('#fabMain');
const fabWrap = qs('#fabWrap');
const fabRow = qs('#fabRow');
const searchInput = qs('#searchInput');
const themeToggle = qs('#themeToggle');
const menuBtn = qs('#menuBtn');
const drawer = qs('#drawer');

/* Render helpers */
function esc(s){return String(s||'').replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));}
function makeThumb(it){ const el = document.createElement('div'); el.className='thumb'; el.innerHTML = `<img data-src="${it.src}" alt="${esc(it.title)}"><div class="t-info">${esc(it.title)}</div>`; el.addEventListener('click', ()=> openViewer(it)); return el; }
function makeCard(it){ const el=document.createElement('article'); el.className='card'; el.innerHTML = `<img data-src="${it.src}" alt="${esc(it.title)}"><div class="meta"><div><div class="title">${esc(it.title)}</div><div class="small">${esc(it.meta)}</div></div><div style="display:flex;gap:8px;align-items:center"><button class="like" data-id="${it.id}">‚ù§ <span class="count">${it.likes}</span></button><button class="share" data-id="${it.id}">üîó</button></div></div>`; el.querySelector('.like').addEventListener('click',(e)=>{ e.stopPropagation(); likeItem(it.id,el);}); el.querySelector('.share').addEventListener('click',(e)=>{ e.stopPropagation(); shareItem(it);}); el.addEventListener('click', ()=> openViewer(it)); return el; }

function renderAll(){
  trendingRow.innerHTML=''; recentRow.innerHTML=''; feedGrid.innerHTML='';
  const sorted = [...feed].sort((a,b)=> (b.likes||0)-(a.likes||0));
  sorted.slice(0,6).forEach(i=> trendingRow.appendChild(makeThumb(i)));
  feed.slice(0,6).forEach(i=> recentRow.appendChild(makeThumb(i)));
  feed.forEach(i=> feedGrid.appendChild(makeCard(i)));
  lazyLoadImages();
}

/* Lazy load images */
let imgObs = null;
function lazyLoadImages(){
  const imgs = qsa('img[data-src]');
  if('IntersectionObserver' in window){
    if(!imgObs){
      imgObs = new IntersectionObserver((entries,obs)=>{
        entries.forEach(entry=>{
          if(entry.isIntersecting){
            const img = entry.target;
            img.src = img.dataset.src;
            img.removeAttribute('data-src');
            imgObs.unobserve(img);
          }
        });
      },{rootMargin:'200px',threshold:0.05});
    }
    imgs.forEach(i=> imgObs.observe(i));
  } else {
    imgs.forEach(i=> { i.src = i.dataset.src; i.removeAttribute('data-src'); });
  }
}

/* Viewer */
function openViewer(item){
  viewerContent.innerHTML = '';
  if(item.type === 'video'){
    const v = document.createElement('video'); v.src = item.src; v.controls=true; v.autoplay=true; v.style.maxHeight='70vh'; viewerContent.appendChild(v);
  } else {
    const img = document.createElement('img'); img.src = item.src; img.alt = item.title; viewerContent.appendChild(img);
  }
  viewer.style.display='flex';
}
qs('#closeViewer').addEventListener('click', ()=> viewer.style.display='none');

/* Like & share */
function likeItem(id,el){
  const idx = feed.findIndex(f=> f.id===id); if(idx<0) return;
  feed[idx].likes = (feed[idx].likes||0) + 1;
  el.querySelector('.count').textContent = feed[idx].likes;
  localStorage.setItem(STORAGE_FEED, JSON.stringify(feed));
}
function shareItem(item){
  if(navigator.share){ navigator.share({title:item.title,text:'Mira esto en SinFiltro',url:item.src}).catch(()=>{}); }
  else { navigator.clipboard?.writeText(item.src).then(()=> alert('Enlace copiado (demo)')).catch(()=> alert('Abrir: '+item.src)); }
}

/* FAB interactions */
let fabOpen = false;
fabMain.addEventListener('click', ()=>{
  fabOpen = !fabOpen;
  if(fabOpen){ fabWrap.classList.add('fab-open'); qsa('.fab-sub').forEach((b,i)=>{ b.style.transform = `translateY(-${(i+1)*52}px)`; b.style.opacity = '1'; }); }
  else { fabWrap.classList.remove('fab-open'); qsa('.fab-sub').forEach(b=>{ b.style.transform = 'translateY(0)'; b.style.opacity = '0'; }); }
});
qs('#fabUpload').addEventListener('click', ()=> toggle('#uploadModal'));
qs('#fabImg').addEventListener('click', ()=> toggle('#uploadModal'));
qs('#fabShort').addEventListener('click', ()=> alert('Crear short (demo)'));

/* Upload (demo local) */
qs('#closeUpload').addEventListener('click', ()=> toggle('#uploadModal'));
qs('#doUpload').addEventListener('click', ()=>{
  const f = qs('#fileInput').files?.[0]; if(!f){ alert('Selecciona un archivo'); return; }
  const reader = new FileReader();
  reader.onload = e => {
    const url = e.target.result;
    const it = { id: 'u'+Date.now(), type: f.type.startsWith('video')? 'video':'image', src: url, title: f.name||'Nuevo', meta: 'Ahora', likes:0 };
    feed.unshift(it); localStorage.setItem(STORAGE_FEED, JSON.stringify(feed)); renderAll(); toggle('#uploadModal'); alert('Subido (demo local).');
  };
  reader.readAsDataURL(f);
});

/* Toggle element show/hide */
function toggle(sel){
  const el = document.querySelector(sel);
  if(!el) return;
  el.style.display = (el.style.display === 'none' || getComputedStyle(el).display === 'none') ? 'block' : 'none';
}

/* Search */
searchInput.addEventListener('input', (e)=>{
  const q = (e.target.value||'').toLowerCase().trim();
  if(!q){ renderAll(); return; }
  const filtered = feed.filter(it=> it.title.toLowerCase().includes(q) || it.meta.toLowerCase().includes(q));
  feedGrid.innerHTML=''; filtered.forEach(i=> feedGrid.appendChild(makeCard(i))); lazyLoadImages();
});

/* Theme toggle */
themeToggle.addEventListener('click', ()=>{
  theme = (theme === 'dark') ? 'light' : 'dark';
  applyTheme(theme);
  localStorage.setItem(STORAGE_THEME, theme);
});
function applyTheme(t){
  if(t === 'light'){ body.classList.add('theme-light'); themeToggle.textContent = '‚òÄÔ∏è'; }
  else { body.classList.remove('theme-light'); themeToggle.textContent = 'üåô'; }
}

/* Drawer */
menuBtn.addEventListener('click', ()=> drawer.style.display = 'block');
qs('#closeDrawer').addEventListener('click', ()=> drawer.style.display = 'none');

/* Bottom nav */
qsa('.nav-item').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    qsa('.nav-item').forEach(n=> n.classList.remove('active'));
    btn.classList.add('active');
    const tab = btn.getAttribute('data-tab');
    navigateTo(tab);
  });
});

function navigateTo(tab){
  if(tab === 'home'){ main.scrollTo({top:0,behavior:'smooth'}); renderAll(); }
  else if(tab === 'videos'){ feedGrid.innerHTML=''; feed.filter((f,i)=> i%2===0).forEach(i=> feedGrid.appendChild(makeCard(i))); lazyLoadImages(); }
  else if(tab === 'likes'){ feedGrid.innerHTML = `<div style="padding:18px;color:var(--muted)">Me gusta ‚Äî (demo)</div>`; }
  else if(tab === 'profile'){ feedGrid.innerHTML = `<div style="padding:18px;color:var(--muted)"><strong>Perfil demo</strong><p>Publicaciones: ${feed.length}</p></div>`; }
}

/* Infinite scroll simulation */
let loading
